{% extends 'main/template.html' %}
{% load static %}
{% load humanize %}
{% block title %}Дашборд{% endblock %}
{% block content %}
<div class="dashboard pl-6 ml-5">    
    <div class="columns pl-6">
        <div class="column .is-flex is-2 py-6 pr-4 pl-4">
            <div class="box has-background-white has-text-centered">
                <form method="GET">
                    {{transaction_filter_form.transaction_date_from}}
                    {{transaction_filter_form.transaction_date_to}}
                    <input type="submit" class="button is-primary is-inverted" value="Фильтровать"/>
                </form>
            </div>
        </div>
        <div class="column .is-flex is-2 py-6 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{clients.count}}</h1>
                <p class="has-text-grey-light">Количество клиентов</p>
            </div>
        </div>
        <div class="column .is-flex is-2 py-6 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{projects.count}}</h1>
                <p class="has-text-grey-light">Количество проектов</p>
            </div>
        </div>
        
        <div class="column .is-flex is-4 py-6 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{csum.transaction__amount__sum|intcomma}} ₽</h1>
                <p class="has-text-grey-light">Сумма всех поступлений и расходов</p>
                <br />
            </div>
        </div>
    </div>
    <div class="columns pl-6">
        <div class="column is-4 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{csum.transaction__amount__sum|intcomma}} ₽</h1>
                <p class="has-text-grey-light">Расходы</p>
                <br />
            </div>
        </div>
        <div class="column is-4 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{sum.total|intcomma}} ₽</h1>
                <p class="has-text-grey-light">Стоимость всех проектов</p>
                <br />
            </div>
        </div>
        <div class="column is-2 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{transactions.count}}</h1>
                <p class="has-text-grey-light">Количество транзакций</p>
            </div>
        </div>
    </div>
    <div class="columns pl-6">
        <div class="column is-4 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{balance.amount__sum|intcomma}} ₽</h1>
                <p class="has-text-grey-light">Баланс</p>
                <br />
            </div>
        </div>
        <div class="column is-4 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{transactions_spendings.amount__sum|intcomma}} ₽</h1>
                <p class="has-text-grey-light">Расходы</p>
                <br />
            </div>
        </div>
        <div class="column is-2 py-1 px-4">
            <div class="box box-grid has-background-white has-text-centered">
                <h1 class="is-size-1">{{transactions.count}}</h1>
                <p class="has-text-grey-light">Количество транзакций</p>
            </div>
        </div>
    </div>
</div>

{% comment %} MODAL FORM PROJECT {% endcomment %}
<div class="modal modalProjectsForm">
    <div class="modal-background"></div>
    <div class="modal-card">
        <header class="modal-card-head">
            <p class="modal-card-title has-text-centered">Создать проект</p>
            <button class="delete modalProjectsFormCloser" aria-label="close"></button>
        </header>
        {% include 'main/project_create.html' %}
    </div>
</div>
<div class="column is-1">
    <div class="">
        <div class="notification notification-on-top is-primary is-hidden has-text-grey-light pt-6 pl-0 ml-0">
            <p class="is-hidden successmessage"> {{successmessagetext}} </p>
            <p class=""> {{ projectform.errors }} </p>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
{% endblock %}